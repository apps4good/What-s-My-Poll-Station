<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Tyler Keating, Jordan Boesch, Daniel Pronych, Andrew Dyck">
    <meta name="description" content="Finds your polling station using GPS. We support the following cities: Regina, Saskatoon" />

    <title>Where is my poll? - an Apps4Good.ca creation</title>

    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" media="screen and (max-device-width: 900px)" href="css/mobile.css" />

    <script src="//maps.googleapis.com/maps/api/js?sensor=false"></script>
    <base target="_parent" />

</head>
<body>

    <div id="loader"></div>
    <h1>
        <a href="#" id="edit-location-btn">
            <span>edit</span>
        </a>
        <a href="http://whereismypoll.com" id="title" target="_parent">Where is my poll?</a>
    </h1>

    <div id="main-map">
        <div id="address">
            <p>
                Not in your ward right now?<br/>Enter your address below.
            </p>
            <form>
                <input type="text" placeholder="123 Fake St" />
                <input type="submit" value="Go!" class="btn" />
                <div id="address-loader" style="visibility:hidden"></div>
            </form>
            <p id="address-error" class="error" style="display:none"></p>
        </div>
        <div id="poll-map-container">
            <div id="poll-map"></div>
            <div id="nearest-station" class="info-container" style="display:none">
                <h3>Your nearest station <em></em> is<span></span></h3>
                <p class="street">
                </p>
            </div>
            <div id="supported-cities" class="info-container" style="display:none">
                <h2>We support the following cities:</h2>
                <ul></ul>
            </div>
            <a href="http://apps4good.ca" id="credits">An Apps4Good.ca creation</a>
        </div>
    </div>

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/Poll.js"></script>
    <script type="text/javascript">

        $(function(){
//            window.testPosition = function(){
//                return {
//                    coords: {
//                        latitude: 52.156085,
//                        longitude: -106.643214
//                    }
//                }
//            };

            PollStation.init({
                $toolbar: $('h1'),
                $loader: $('#loader'),
                $map: $('#poll-map'),
                $nearest_station: $('#nearest-station'),
                $nearest_station_ward: $('#nearest-station em'),
                $nearest_station_name: $('#nearest-station span'),
                $nearest_station_street: $('#nearest-station .street'),
                $edit_location: $('#edit-location-btn'),
                $address: $('#address'),
                $address_form: $('#address form'),
                $address_input: $('#address input[type="text"]'),
                $address_submit: $('#address input[type="submit"]'),
                $address_loader: $('#address-loader'),
                $address_error: $('#address-error'),
                $poll_map_container: $('#poll-map-container'),
                $supported_cities: $('#supported-cities')
            });
        });
    </script>

    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-35684574-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body>
</html>
